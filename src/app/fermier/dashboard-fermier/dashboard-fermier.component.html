<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tableau de bord production</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <style>
    .alert-icon {
      width: 20px;
      height: 20px;
      display: inline-block;
      border-radius: 50%;
      margin-right: 8px;
    }
    .alert-danger-bg {
      background-color: #ff4444;
    }
    .alert-warning-bg {
      background-color: #ffbb33;
    }
    .site-card {
      margin-bottom: 20px;
      border-left: 4px solid #f0ad4e;
    }
    .hive-card {
      margin-bottom: 10px;
      border-left: 3px solid #5cb85c;
    }
    .need-action {
      border-left-color: #d9534f !important;
    }
    .map-container {
      height: 400px;
      background-color: #f5f5f5;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .badge-intervention {
      background-color: #d9534f;
    }
    .badge-extension {
      background-color: #f0ad4e;
    }
  </style>
</head>
<body>
<div class="container-fluid py-4">
  <h1 class="mb-4"><i class="bi bi-graph-up"></i> Tableau de bord production</h1>

  <!-- Filtres -->
  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title">Filtres</h5>
      <div class="row">
        <div class="col-md-3">
          <label for="productionThreshold" class="form-label">Seuil de production (kg)</label>
          <input type="number" class="form-control" id="productionThreshold" value="20">
        </div>
        <div class="col-md-3">
          <label for="period" class="form-label">Période</label>
          <select class="form-select" id="period">
            <option selected>Ce mois</option>
            <option>Cette saison</option>
            <option>Cette année</option>
            <option>Personnalisée</option>
          </select>
        </div>
        <div class="col-md-3">
          <label for="siteFilter" class="form-label">Site</label>
          <select class="form-select" id="siteFilter">
            <option selected>Tous les sites</option>
            <option>Verger Pommier</option>
            <option>Champ Lavande</option>
            <option>Forêt Acacia</option>
          </select>
        </div>
        <div class="col-md-3">
          <label for="hiveFilter" class="form-label">Ruche</label>
          <select class="form-select" id="hiveFilter">
            <option selected>Toutes les ruches</option>
            <option>R-001</option>
            <option>R-002</option>
            <option>R-003</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Carte interactive (optionnelle) -->
  <div class="map-container d-flex align-items-center justify-content-center">
    <div class="text-center">
      <i class="bi bi-map" style="font-size: 2rem; color: #6c757d;"></i>
      <p>Carte interactive des sites</p>
      <button class="btn btn-sm btn-outline-primary">Afficher la carte</button>
    </div>
  </div>

  <!-- Liste des sites -->
  <div class="mb-3 d-flex justify-content-between align-items-center">
    <h3>Sites avec production élevée</h3>
    <span class="badge bg-primary">5 sites</span>
  </div>

  <!-- Site 1 -->
  <div class="card site-card mb-3">
    <div class="card-body">
      <div class="d-flex justify-content-between">
        <h5 class="card-title">Verger Pommier</h5>
        <span class="text-success fw-bold">Total: 124 kg</span>
      </div>
      <p class="card-text text-muted"><i class="bi bi-geo-alt"></i> 45.1234, 4.5678</p>

      <!-- Ruches -->
      <div class="mt-3">
        <h6 class="mb-2">Ruches concernées (3/10)</h6>

        <!-- Ruche 1 -->
        <div class="card hive-card need-action mb-2">
          <div class="card-body py-2">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="fw-bold">R-001</span>
                <span class="ms-3">28 kg</span>
                <span class="ms-3 text-muted">Dernière mesure: 15/06/2023</span>
              </div>
              <div>
                <span class="badge badge-intervention me-1">Collecte imminente</span>
                <span class="badge badge-extension">Extension nécessaire</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Ruche 2 -->
        <div class="card hive-card mb-2">
          <div class="card-body py-2">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="fw-bold">R-002</span>
                <span class="ms-3">25 kg</span>
                <span class="ms-3 text-muted">Dernière mesure: 14/06/2023</span>
              </div>
              <div>
                <span class="badge badge-intervention me-1">Collecte imminente</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Ruche 3 -->
        <div class="card hive-card mb-2">
          <div class="card-body py-2">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="fw-bold">R-003</span>
                <span class="ms-3">22 kg</span>
                <span class="ms-3 text-muted">Dernière mesure: 16/06/2023</span>
              </div>
              <div>
                <span class="badge badge-extension">Extension nécessaire</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Site 2 -->
  <div class="card site-card mb-3">
    <div class="card-body">
      <div class="d-flex justify-content-between">
        <h5 class="card-title">Champ Lavande</h5>
        <span class="text-success fw-bold">Total: 98 kg</span>
      </div>
      <p class="card-text text-muted"><i class="bi bi-geo-alt"></i> 45.2234, 4.6678</p>

      <!-- Ruches -->
      <div class="mt-3">
        <h6 class="mb-2">Ruches concernées (2/8)</h6>

        <!-- Ruche 1 -->
        <div class="card hive-card need-action mb-2">
          <div class="card-body py-2">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="fw-bold">R-101</span>
                <span class="ms-3">32 kg</span>
                <span class="ms-3 text-muted">Dernière mesure: 12/06/2023</span>
              </div>
              <div>
                <span class="badge badge-intervention me-1">Collecte imminente</span>
                <span class="badge badge-extension">Extension nécessaire</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Ruche 2 -->
        <div class="card hive-card mb-2">
          <div class="card-body py-2">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="fw-bold">R-102</span>
                <span class="ms-3">21 kg</span>
                <span class="ms-3 text-muted">Dernière mesure: 13/06/2023</span>
              </div>
              <div>
                <span class="badge badge-extension">Extension nécessaire</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Détails Ruche -->
<div class="modal fade" id="hiveDetailsModal" tabindex="-1" aria-labelledby="hiveDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="hiveDetailsModalLabel">Détails de la ruche R-001</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row mb-4">
          <div class="col-md-6">
            <h6>Informations de base</h6>
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between">
                <span>Site:</span>
                <span>Verger Pommier</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span>Type:</span>
                <span>Dadant</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span>Reine marquée:</span>
                <span>Oui (2022)</span>
              </li>
            </ul>
          </div>
          <div class="col-md-6">
            <h6>Production</h6>
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between">
                <span>Production actuelle:</span>
                <span class="fw-bold">28 kg</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span>Dernière mesure:</span>
                <span>15/06/2023</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span>Production moyenne:</span>
                <span>18 kg/mois</span>
              </li>
            </ul>
          </div>
        </div>

        <div class="mb-4">
          <h6>Alertes actives</h6>
          <div class="alert alert-warning d-flex align-items-center">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <div>
              <strong>Collecte de miel imminente</strong> - La ruche a atteint 90% de sa capacité.
            </div>
          </div>
          <div class="alert alert-warning d-flex align-items-center">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <div>
              <strong>Extension/division nécessaire</strong> - L'essaim est trop important pour la ruche actuelle.
            </div>
          </div>
        </div>

        <div class="mb-4">
          <h6>Historique des interventions</h6>
          <div class="table-responsive">
            <table class="table table-sm">
              <thead>
              <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Technicien</th>
                <th>Notes</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>10/06/2023</td>
                <td>Inspection</td>
                <td>J. Dupont</td>
                <td>Reine en bonne santé, couvain abondant</td>
              </tr>
              <tr>
                <td>25/05/2023</td>
                <td>Nourrissement</td>
                <td>M. Martin</td>
                <td>Apport de sirop 1:1</td>
              </tr>
              <tr>
                <td>15/04/2023</td>
                <td>Traitement</td>
                <td>J. Dupont</td>
                <td>Traitement varroa - acide oxalique</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div>
          <h6>Recommandations</h6>
          <ul class="list-group">
            <li class="list-group-item">
              <i class="bi bi-check-circle-fill text-success me-2"></i>
              Prévoir la collecte de miel dans les 7 jours
            </li>
            <li class="list-group-item">
              <i class="bi bi-check-circle-fill text-success me-2"></i>
              Ajouter une hausse avant la fin du mois
            </li>
            <li class="list-group-item">
              <i class="bi bi-check-circle-fill text-success me-2"></i>
              Surveiller l'activité de butinage (forte activité)
            </li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
        <button type="button" class="btn btn-primary">Planifier une intervention</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Simulation de clic pour afficher la modal (pour la démo)
  document.addEventListener('DOMContentLoaded', function() {
    // Dans une vraie application, vous ajouteriez des event listeners sur les ruches
    var modal = new bootstrap.Modal(document.getElementById('hiveDetailsModal'));
    // modal.show(); // Décommenter pour voir la modal au chargement
  });
</script>
</body>
</html>
